## 함수 옮기기 (Move Function)

### as-is
```javascript
class Account {
    get overdraftCharge() { /* ... */ }
}
```

### to-be
```javascript
class AccountType {
    get overdraftCharge() { /* ... */ }
}
```

* 좋은 소프트웨어 설계의 핵심은 모듈성이다.
  * 모듈성이란 프로그램 어딘가를 수정하려 할 때 해당 기능과 깊이 관련된 작은 일부만 이해해도 가능하게 해주는 능력이다.
* 모듈성을 높이려면 서로 연관된 요소들을 함께 묶고, 요소 사이의 연결 관계를 쉽게 찾고 이해할 수 있도록 해야 한다.
* 모든 함수는 특정 컨텍스트 안에 존재하고, 객체 지향 프로그래밍의 핵심 모듈화 컨텍스트는 클래스다.
* 함수를 옮길지 말지를 정하기 어렵다면 대상 함수의 현재 컨텍스트와 후보 컨텍스트를 둘러보면 도움이 된다.
* 서로 관련된 여러 함수를 묶을 새로운 컨텍스트가 필요해진다면 '여러 함수를 클래스로 묶기'나 '클래스 추출하기'로 해결할 수 있다.

- - -

### 절차
1. 선택한 함수가 현재 컨텍스트에서 사용 중인 모든 프로그램 요소를 살펴본다. 이 요소들 중에도 함께 옮겨야 할 게 있느지 고민해본다.
   * 호출되는 함수 중 함께 옮길 게 있다면 대체로 그 함수를 먼저 옮기는 게 낫다. 얽혀있는 함수가 여러 개라면 다른 곳에 미치는 영향이 적은 함수부터 옮긴다.
   * 하위 함수들의 호출자가 고수준 함수 하나뿐이면 먼저 하위 함수들을 고수준 함수에 인라인한 다음, 고수준 함수를 옮기고, 옮긴 위치에서 개별 함수들로 다시 추출한다.
2. 선택한 함수가 다형 메서드인지 확인한다.
3. 선택한 함수를 타깃 컨텍스트로 복사한다. (책에서 원래의 함수를 소스 함수(source function), 복사해서 새로 만든 함수를 타킷 함수(target function)이라 부르고 있다.)
   * 함수 본문에서 소스 컨텍스트의 요소를 사용한다면 해당 요소들을 매개변수로 넘기거나 소스 컨텍스트 자체를 참조로 넘긴다.
   * 함수를 옮기면서 새로운 컨텍스트에 어울리는 이름이 있다면 바꿔준다.
4. 정적 분석을 수행한다.
5. 소스 컨텍스트에서 타깃 함수를 참조할 방법을 찾아 반영한다.
6. 소스 함수를 타깃 함수의 위임 함수가 되도록 수정한다.
7. 테스트한다.
8. 소스 함수를 인라인할지 고민해본다.
