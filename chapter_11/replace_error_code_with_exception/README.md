## 오류 코드를 예외로 바꾸기 (Replace Error Code with Exception)

### as-is
```javascript
if (data)
    return new ShippingRules(data);
else
    return -23;
```

### to-be
```javascript
if (data)
    return new ShippingRules(data);
else
    throw new OrderProcessingError(-23);
```

* 예외는 프로그래밍 언어에서 제공하는 독립적인 오류 처리 메커니즘이다.
* 오류가 발견되면 예외를 던지고, 적절한 예외 핸들러를 찾을 때까지 콜스택을 타고 위로 전파된다.
* 예외를 사용하면 오류 코드를 일일이 검사하거나 오류를 식별해 콜스택 위로 던지는 일을 신경쓰지 않아도 된다.
* 예외는 정확히 예상 밖의 동작일 때만 쓰여야 한다. 즉, 프로그램의 정상 동작 범주에 들지 않는 오류를 나타낼 때만 사용해야 한다.
* 예외를 던지는 코드를 프로그램 종료 코드로 바꿔도 프로그램이 여전히 정상 동작할를 따져보고, 정상 동작하지 않을 것 같다면 에외를 사용하지 말라는 신호다.

- - -

### 절차
1. 콜스택 상위에 해당 예외를 처리할 예외 핸들러를 작성한다.
2. 테스트한다.
3. 해당 오류 코드를 대체할 예외와 그 밖의 예욀를 구분할 식별 방법을 찾는다.
4. 정적 검사를 수행한다.
5. catch 절을 수정하여 직접 처리할 수 있는 예외는 적절히 대처하고 그렇지 않은 예외는 다시 던진다.
6. 테스트한다.
7. 오류 코드를 반환하는 곳 모두에서 예외를 던지도록 수정한다. 하나식 수정할 때마다 테스트한다.
8. 모두 수정했다면 그 오류 코드를 콜스택 위로 전달하려는 코드를 모두 제거한다. 하나씩 수정할 때마다 테스트한다.
